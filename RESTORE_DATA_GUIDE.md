# üîÑ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –≤ Render

## üìã –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ Render –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (4,210+ –æ–±—ä–µ–∫—Ç–æ–≤) –±—ã–ª–∏ —É—Ç–µ—Ä—è–Ω—ã –∏–∑-–∑–∞ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 
–£ –Ω–∞—Å –µ—Å—Ç—å –±—ç–∫–∞–ø –æ—Ç **27 –∏—é–Ω—è 2025** —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –°–∫—Ä–∏–ø—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≥–æ—Ç–æ–≤ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ.

---

## üõ†Ô∏è –í–∞—Ä–∏–∞–Ω—Ç 1: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Web Service

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:
git add scripts/restore_data.py
git add backups/20250627_201421/
git commit -m "üì¶ –î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö"
git push origin main
```

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ Render
1. –ó–∞–π–¥–∏—Ç–µ –≤ Dashboard Render.com
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à Web Service
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Shell** –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Deploy Logs**
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /opt/render/project/src

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –±—ç–∫–∞–ø–∞
ls -la backups/20250627_201421/

# –ó–∞–ø—É—Å–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
python scripts/restore_data.py 20250627_201421
```

---

## üõ†Ô∏è –í–∞—Ä–∏–∞–Ω—Ç 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Environment Variables

–ï—Å–ª–∏ –≤ Render –¥—Ä—É–≥–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã (PostgreSQL), –Ω—É–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç.

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DATABASE_URL –≤ Render:
```bash
echo $DATABASE_URL
```

–ï—Å–ª–∏ —ç—Ç–æ PostgreSQL, —Å–æ–∑–¥–∞–π—Ç–µ `scripts/restore_data_postgres.py`:

```python
import os
import psycopg2
from urllib.parse import urlparse

# –ü–∞—Ä—Å–∏–º DATABASE_URL
url = urlparse(os.environ['DATABASE_URL'])
conn = psycopg2.connect(
    host=url.hostname,
    port=url.port,
    user=url.username,
    password=url.password,
    database=url.path[1:]
)
```

---

## üõ†Ô∏è –í–∞—Ä–∏–∞–Ω—Ç 3: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø –∫ Shell –æ–≥—Ä–∞–Ω–∏—á–µ–Ω:

1. **–°–æ–∑–¥–∞–π—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –±–æ—Ç–µ:**

```python
@dp.message(Command("restore_backup"))
async def restore_backup_command(message: Message):
    """–ö–æ–º–∞–Ω–¥–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞."""
    if message.from_user.id != ADMIN_USER_ID:  # –í–∞—à Telegram ID
        return
        
    await message.answer("üîÑ –ù–∞—á–∏–Ω–∞—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...")
    
    # –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
    success = restore_from_backup("20250627_201421")
    
    if success:
        await message.answer("‚úÖ –î–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!")
    else:
        await message.answer("‚ùå –û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è")
```

2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/restore_backup` –≤ Telegram**

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:
- **üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: 4 (–æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- **üìù –ó–∞–ø–∏—Å–µ–π –≤ –ª–æ–≥–∞—Ö**: 4,210
- **üìä –î–æ—Å—Ç—É–ø–Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** –∑–∞ –≤–µ—Å—å –ø–µ—Ä–∏–æ–¥
- **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### –í Telegram –±–æ—Ç–µ:
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä–∞—Ñ–∏–∫–∏ - –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

### –í –ª–æ–≥–∞—Ö Render:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π
python -c "
from database_safe import *
with get_db_session() as session:
    print(f'Users: {session.query(User).count()}')
    print(f'Logs: {session.query(Log).count()}')
"
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **Backup —Å–æ–≤–º–µ—Å—Ç–∏–º** - —Å–∫—Ä–∏–ø—Ç —É—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ `UserSettings`
2. **–î—É–±–ª–∏–∫–∞—Ç—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è** - —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
3. **–¢–∞–π–º–∑–æ–Ω—ã** –±—É–¥—É—Ç –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** —Å–æ–∑–¥–∞–¥—É—Ç—Å—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Render** –Ω–∞ –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª–∞–º** –±—ç–∫–∞–ø–∞
3. **–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∞—Ö –¥–æ—Å—Ç—É–ø–∞** –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. **–°–≤—è–∂–∏—Ç–µ—Å—å —Å–æ –º–Ω–æ–π** - –æ—Ç–ø—Ä–∞–≤–ª—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

---

*–°–æ–∑–¥–∞–Ω–æ: 29 –∏—é–Ω—è 2025*  
*–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ: ‚úÖ 4,210 –∑–∞–ø–∏—Å–µ–π –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ* 